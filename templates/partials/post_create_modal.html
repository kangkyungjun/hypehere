{% load static %}
{% load i18n %}

<!-- Post Creation Modal -->
<div id="post-modal" class="modal-overlay hidden" data-mode="create">
    <div class="modal-container">
        <div class="modal-header">
            <h2 id="post-modal-title">{% trans "ìƒˆ ê²Œì‹œë¬¼" %}</h2>
            <button type="button" class="modal-close" id="close-modal">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>

        <div class="modal-body">
            <!-- Error Alert (Hidden by default) -->
            <div id="post-error-alert" class="alert alert-error hidden" style="margin-bottom: var(--space-md);">
                <span id="post-error-message"></span>
            </div>

            <form id="post-form">
                <input type="hidden" id="edit-post-id" value="">
                <!-- Content Textarea -->
                <div class="form-group">
                    <textarea
                        id="post-content"
                        name="content"
                        class="form-control"
                        rows="6"
                        maxlength="1000"
                        placeholder="{% trans 'ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆë‚˜ìš”?&#10;&#10;í•´ì‹œíƒœê·¸ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ #ì„ ì•ì— ë¶™ì´ì„¸ìš” (ì˜ˆ: #í•œêµ­ì–´í•™ìŠµ)' %}"
                        required
                    ></textarea>
                    <div class="flex" style="justify-content: space-between; align-items: center; margin-top: var(--space-xs);">
                        <span class="form-text" id="char-counter">{% trans "0 / 1000ì" %}</span>
                        <span class="form-text" style="font-size: var(--font-size-xs); color: var(--color-text-lighter);">
                            {% trans "íŒ: #í•´ì‹œíƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²Œì‹œë¬¼ì„ ë¶„ë¥˜í•˜ì„¸ìš”" %}
                        </span>
                    </div>
                </div>

                <!-- Language Selection -->
                <div class="flex gap-sm" style="margin-top: var(--space-md);">
                    <div class="form-group" style="flex: 1;">
                        <label for="native-language" class="form-label">{% trans "ëª¨êµ­ì–´" %}</label>
                        <div id="native-language-selector"></div>
                        <select id="native-language" name="native_language" class="hidden">
                            <option value="">{% trans "ì„ íƒ ì•ˆí•¨" %}</option>
                            <option value="EN">ğŸ‡ºğŸ‡¸ English</option>
                            <option value="KO">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                            <option value="JA">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                            <option value="ZH">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                            <option value="ES">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                            <option value="FR">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                            <option value="DE">ğŸ‡©ğŸ‡ª Deutsch</option>
                        </select>
                    </div>

                    <div class="form-group" style="flex: 1;">
                        <label for="target-language" class="form-label">{% trans "í•™ìŠµ ì–¸ì–´" %}</label>
                        <div id="target-language-selector"></div>
                        <select id="target-language" name="target_language" class="hidden">
                            <option value="">{% trans "ì„ íƒ ì•ˆí•¨" %}</option>
                            <option value="EN">ğŸ‡ºğŸ‡¸ English</option>
                            <option value="KO">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                            <option value="JA">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                            <option value="ZH">ğŸ‡¨ğŸ‡³ ä¸­ë¬¸</option>
                            <option value="ES">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                            <option value="FR">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                            <option value="DE">ğŸ‡©ğŸ‡ª Deutsch</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="cancel-post">{% trans "ì·¨ì†Œ" %}</button>
            <button type="submit" form="post-form" class="btn btn-primary" id="submit-post">
                <span id="submit-post-text">{% trans "ê²Œì‹œí•˜ê¸°" %}</span>
                <span id="submit-post-loading" class="spinner spinner-primary hidden"></span>
            </button>
        </div>
    </div>
</div>
